# Use a minimal Java runtime
FROM eclipse-temurin:17-jre

WORKDIR /app

# Copy the backend JAR
COPY ./target/backend-1.0-SNAPSHOT.jar /app/

# Copy all dependency JARs (generated by maven-dependency-plugin)
COPY ./target/dependency /app/dependency

EXPOSE 4567

# Run the backend server with all dependencies in the classpath
CMD ["java", "-cp", "backend-1.0-SNAPSHOT.jar:dependency/*", "com.iiitb.backend.calcBackend"]